extends ../layouts/layout_noheader
block layout-content
  h1 Edit
  h4 Product
  hr
  .row
    .col-md-4
      label(for='fname') ProductName
      input#ProductName(type='text' name='fname' value=products_test[0].ProductName)
      br
      br
      input#ProductID(type='text' name='fname' value=products_test[0].ProductID hidden='')
      input#SupplierID(type='text' name='fname' value=products_test[0].SupplierID hidden='')
      label(for='lname') ProductQuantityS
      input#ProductQuantityS(type='number' name='lname' value=products_test[0].ProductQuantityS)
      br
      br
      label(for='lname') ProductQuantityM
      input#ProductQuantityM(type='number' name='lname' value=products_test[0].ProductQuantityM)
      br
      br
      label(for='lname') ProductQuantityL
      input#ProductQuantityL(type='number' name='lname' value=products_test[0].ProductQuantityL)
      br
      br
      label(for='lname') ProductColor
      input#ProductColor(type='text' name='lname' value=products_test[0].ProductColor)
      br
      br
      label(for='lname') ProductRating
      input#ProductRating(type='number' name='lname' value=products_test[0].ProductRating)
      br
      br
      label(for='lname') ProductPrice
      input#ProductPrice(type='number' name='lname' value=products_test[0].ProductPrice)
      br
      br
      label(for='lname') ProductImage
      input#ProductImage(type='file' name='lname' class='.custom-file-input')
      br
      br
      input#ProductImageold(type='text' name='lname' value=products_test[0].ProductImage hidden='')
      input#btn.btn.btn-primary(type='button' value='Save')
  script.
    $('#btn').click(function () {
    var elmId = $(this).attr("id");
    if (typeof x6 == 'undefined') {
    x6 = $('#ProductImageold').val()
    }
    send();
    });
    function send() {
    $.post("/products/edit", {
    ProductId: $('#ProductId').val(),
    ProductName: $('#ProductName').val(),
    ProductColor: $('#ProductColor').val(),
    ProductID: $('#ProductID').val(),
    SupplierID: $('#SupplierID').val(), ProductRating: $('#ProductRating').val(),
    ProductPrice: $('#ProductPrice').val(), ProductImage: x6,
    ProductQuantityS: $('#ProductQuantityS').val(), ProductQuantityM: $('#ProductQuantityM').val(),
    ProductQuantityL: $('#ProductQuantityL').val()
    }, function (data) {
    $("#maindiv").html(data);
    });
    }
  script.
    File.prototype.convertToBase64 = function (callback) {
    var reader = new FileReader();
    reader.onloadend = function (e) {
    callback(e.target.result, e.target.error);
    };
    reader.readAsDataURL(this);
    };
    $("#ProductImage").on('change', function () {
    var selectedFile = this.files[0];
    selectedFile.convertToBase64(function (base64) {
    x5 = base64;
    $.post("/products/saveimage", {
    file: x5
    }, function (data) {
    x6 = data;
    });
    })
    });
