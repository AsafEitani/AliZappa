extends ../layouts/mylayout
block layout-content
  link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css')
  link(rel='stylesheet' href='/stylesheets/products.css')
  h1 Index
  script.
    // filter
    $('#btn-filter').click(filter);
    function filter() {
    var Stringvalue = $('#name-search').val();
    var conceptName = $('#colors-search').find(":selected").text();
    var minValue = $('#min-search').val();
    var maxValue = $('#max-search').val();
    var rating = $('#rating-search').val();
    $.get('/Products/index', { searchColor: conceptName, searchString: Stringvalue, minValue: minValue, maxValue: maxValue, rating: rating }, function (data, status) {
    $('body').html(data);
    })
    }
    // show all products
    $('#btn-show').click(show);
    function show() {
    $.get('/Products/index', function (data, status) {
    $('body').html(data);
    })
    }
    // update min price
    function updateMinPrice(val) {
    $('#min-val').val(val);
    }
    // update max price
    function updateMaxPrice(val) {
    $('#max-val').val(val);
    }
  .container
    nav.navbar.navbar-expand-lg.navbar-light
      button.navbar-toggler(type='button' data-toggle='collapse' data-target='#navbarSupportedContent' aria-controls='navbarSupportedContent' aria-expanded='false' aria-label='Toggle navigation')
        span.navbar-toggler-icon
      #navbarSupportedContent.collapse.navbar-collapse
        ul.navbar-nav.mr-auto
          li.nav-item.dropdown
            input#name-search.form-control(type='search' placeholder='Name Search' aria-label='Search')
          li.nav-item
            form.form-inline.my-2.my-lg-0.select-box
              select#colors-search.nav-link.select-box(aria-labelledby='navbarDropdown')
                option(disabled='' selected='') Color
                - let uniqueColors = []
                each item in products_test
                  if (-1 === uniqueColors.indexOf(item.ProductColor))
                    - uniqueColors.push(item.ProductColor)
                    option(value='Product' color='') #{item.ProductColor}
          li.nav-item
            form.form-inline.my-2.my-lg-0.select-box
              select#rating-search.nav-link.select-box(aria-labelledby='navbarDropdown')
                option(disabled='' selected='') Rating
                option(value='1') 1+
                option(value='2') 2+
                option(value='3') 3+
                option(value='4') 4+
                option(value='5') 5+
          li.nav-item
            form.form-inline.my-2.my-lg-0
              label.nav-link(for='price-min') Min Price:
              input#min-search.nav-link(type='range' name='price-min' value='0' min='0' max='1000' onchange='updateMinPrice(this.value);')
              input#min-val.price-input.nav-link(type='text' value='0')
          li.nav-item
            form.form-inline.my-2.my-lg-0
              label.nav-link(for='price-max') Max Price:
              input#max-search.nav-link(type='range' name='price-max' value='1000' min='0' max='1000' onchange='updateMaxPrice(this.value);')
              input#max-val.price-input.nav-link(type='text' value='1000')
        ul.navbar-nav
          li.nav-item
            a#btn-filter.nav-link(href='#') Filter
          li.nav-item
            a#btn-show.nav-link(href='#') Show All
  // Display all products
  .row.row-cols-1.row-cols-md-4.g-4
    each item in products_test
      .col
        .product.card
          img.card-img-top(src='/images/'+item.ProductImage width='20' height='160' alt='')
          .card-body
            h5.card-title #{item.ProductName}
            p.card-text #{item.ProductPrice}$
            a.btn.btn-info.Details(href='/Products/Details/'+item.ProductID) View Details
  script(src='/javascript/site.js')
